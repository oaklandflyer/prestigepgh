<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Pittsburgh Prestige Remodeling – Craftsmanship in Black & Gold</title>
  <meta name="description" content="Pittsburgh Prestige Remodeling — kitchens, baths, basements, and full-home renovations across the Pittsburgh area." />
  <meta name="keywords" content="remodeling, kitchen remodel, bathroom remodel, basement finishing, Pittsburgh remodeler" />
  <meta name="theme-color" content="#101820" />
  <link rel="canonical" href="https://prestigepgh.com/" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

  <!-- Fancybox (for lightbox if/when you add project photos) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" />

  <!-- Google tag (gtag.js) – replace with client's property when ready -->
  <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  </script> -->

  <style>
    :root{
      /* Pittsburgh Black & Gold */
      --primary:#101820;   /* black */
      --accent:#FFB612;    /* gold */
      --ink:#0e1420;       /* deep ink for body text */
      --bg:#fafafa;        /* soft light background */
      --panel:rgba(255,255,255,.94);
      --shadow:0 10px 40px rgba(0,0,0,.10);
      --radius:18px;
      --cta:#101820;
      --cta-hover:#FFB612;
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:'Montserrat',Arial,sans-serif;background:var(--bg);color:var(--ink);scroll-behavior:smooth}
    img{max-width:100%;display:block}
    a{text-decoration:none;color:inherit}

    /* ======= HEADER ======= */
    .site-header{
      position:fixed;inset-inline:0;top:0;z-index:1000;display:flex;align-items:center;justify-content:space-between;
      padding:14px clamp(16px,4vw,64px);background:rgba(255,255,255,.92);backdrop-filter:saturate(140%) blur(10px);
      box-shadow:0 1px 12px rgba(16,24,32,.08);transition:transform .32s ease, top .32s ease
    }
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.04em;color:var(--primary)}
    .brand-mark{width:38px;height:38px;border-radius:9px;background:conic-gradient(from 0deg, var(--accent) 0 60%, transparent 60% 100%), var(--primary);box-shadow:0 2px 10px rgba(0,0,0,.15)}
    .brand span{font-size:1.05rem;text-transform:uppercase}
    .site-nav ul{list-style:none;display:flex;gap:clamp(10px,2vw,28px);margin:0;padding:0}
    .site-nav a{font-weight:700;padding:8px 14px;border-radius:999px;color:var(--primary);transition:background .2s,color .2s}
    .site-nav a:hover,.site-nav a.active,[aria-current="page"]{background:var(--accent);color:#111}
    .menu-toggle{display:none;width:44px;height:44px;border:none;background:none;cursor:pointer}
    .menu-toggle .bar{display:block;width:26px;height:3px;margin:5px auto;background:var(--primary);border-radius:2px;transition:.3s}
    .menu-toggle.open .bar:nth-child(1){transform:translateY(8px) rotate(45deg)}
    .menu-toggle.open .bar:nth-child(2){opacity:0}
    .menu-toggle.open .bar:nth-child(3){transform:translateY(-8px) rotate(-45deg)}
    @media (max-width:860px){
      .menu-toggle{display:block}
      .site-nav{position:fixed;right:0;top:74px;width:min(68vw,360px);height:calc(100dvh - 74px);background:#fff;transform:translateX(100%);
        transition:transform .24s cubic-bezier(.4,2.2,.3,1);box-shadow:-2px 0 18px rgba(0,0,0,.18)}
      .site-nav.open{transform:translateX(0)}
      .site-nav ul{flex-direction:column;padding:26px;gap:12px}
      body.no-scroll{overflow:hidden}
    }

    /* ======= HERO ======= */
    .hero{
      position:relative;min-height:72vh;display:flex;align-items:center;justify-content:center;border-radius:0 0 var(--radius) var(--radius);
      box-shadow:var(--shadow);overflow:hidden;margin-top:92px;background:linear-gradient(120deg, rgba(16,24,32,1) 0%, rgba(16,24,32,.85) 40%, rgba(255,182,18,.15) 100%);
      isolation:isolate
    }
    .hero::after{content:"";position:absolute;inset:0;pointer-events:none;background-image:radial-gradient(rgba(255,182,18,.08) 1px, transparent 1px);background-size:3px 3px;opacity:.5}

    .glass-wrap{position:relative;z-index:1;width:min(780px,94vw);padding:0;filter:drop-shadow(0 20px 70px rgba(0,0,0,.35))}
    .liquid-glass{position:relative;padding:28px 28px 24px;border-radius:28px;overflow:hidden;background:linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.06));
      border:1px solid rgba(255,255,255,.22);box-shadow:inset 0 1px 0 rgba(255,255,255,.28), 0 20px 50px rgba(0,0,0,.35);color:#ffffff;text-align:center;backdrop-filter: blur(22px) saturate(140%)}
    .liquid-glass::before,.liquid-glass::after{content:"";position:absolute;inset:-40%;z-index:-1;background:radial-gradient(40% 40% at 20% 20%, rgba(255,182,18,.55) 0%, rgba(255,182,18,0) 60%),
        radial-gradient(35% 45% at 80% 30%, rgba(16,24,32,.45) 0%, rgba(16,24,32,0) 60%),radial-gradient(45% 35% at 50% 80%, rgba(255,255,255,.28) 0%, rgba(255,255,255,0) 60%);
      filter:blur(30px);animation:floatBlob 16s ease-in-out infinite alternate;opacity:.9}
    .liquid-glass::after{animation-duration:22s;animation-delay:-4s;transform:scale(1.05);mix-blend-mode:screen;opacity:.7}
    @keyframes floatBlob{0%{transform:translate3d(-4%,-2%,0) rotate(0) scale(1)}100%{transform:translate3d(4%,3%,0) rotate(6deg) scale(1.06)}}

    .hero h1{font-family:'Playfair Display',serif;font-size:clamp(2rem,4.6vw,3rem);font-weight:700;margin:0 0 12px;color:#fff;letter-spacing:.02em;text-shadow:0 2px 12px rgba(0,0,0,.35)}
    .hero p{font-size:1.1rem;margin:0 0 18px;color:#f5f8ff}
    .hero-btns{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:18px}
    .btn{background:var(--cta);color:#fff;font-weight:800;padding:11px 28px;border-radius:999px;border:2px solid var(--accent);cursor:pointer;box-shadow:0 6px 22px rgba(0,0,0,.20);
      font-size:1rem;transition:transform .12s ease, background .2s,color .2s, border-color .2s;letter-spacing:.03em}
    .btn:hover,.btn:focus{background:var(--cta-hover);color:#111;border-color:transparent;transform:translateY(-1px)}

    /* ======= SECTIONS ======= */
    .page-hero{padding:42px clamp(24px,6vw,64px) 10px}
    .page-hero h2{font-family:'Playfair Display',serif;font-weight:700;color:var(--primary);font-size:clamp(1.8rem,4vw,2.4rem);margin:0 0 6px}
    .page-hero p{margin:0 0 24px;color:#2a2f3b}

    .controls{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin:0 clamp(24px,6vw,64px) 14px}
    .breadcrumbs{display:flex;flex-wrap:wrap;gap:8px;align-items:center;font-weight:700;color:#2a2f3b}
    .breadcrumbs a{color:var(--primary)}
    .crumb-sep{opacity:.5}
    .back-btn{display:none;margin:0 clamp(24px,6vw,64px) 26px;align-items:center;gap:8px;background:#fff;border:2px solid var(--accent);border-radius:999px;padding:9px 14px;
      font-weight:800;color:var(--primary);box-shadow:0 1px 8px rgba(0,0,0,.06)}
    .back-btn:hover{background:var(--accent);color:#111;border-color:transparent}

    .album-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:48px 38px;margin:0 clamp(24px,6vw,64px) 60px}
    @media (max-width:1100px){.album-grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:640px){.album-grid{grid-template-columns:1fr;gap:28px}}
    .album-card{display:flex;flex-direction:column;gap:14px}
    .album-cover{position:relative;border-radius:8px;overflow:hidden;aspect-ratio:3/2;background:linear-gradient(135deg, #1a1f2a, #101820);box-shadow:0 4px 22px rgba(0,0,0,.10);transition:transform .28s ease, box-shadow .28s ease}
    .album-card:hover .album-cover{transform:translateY(-2px);box-shadow:0 10px 32px rgba(16,24,32,.25)}

    .album-caption{display:flex;flex-direction:column;align-items:center;text-align:center}
    .album-title{font-weight:900;letter-spacing:.08em;text-transform:uppercase;color:#101820}
    .album-sub{margin-top:6px;font-size:.88rem;letter-spacing:.12em;text-transform:uppercase;color:#6b778d}

    .photo-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin:10px clamp(24px,6vw,64px) 60px}
    @media (max-width:1100px){.photo-grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:640px){.photo-grid{grid-template-columns:1fr;gap:12px}}
    .photo{position:relative;border-radius:8px;overflow:hidden;aspect-ratio:3/2;background:linear-gradient(135deg, #262b36, #101820);box-shadow:0 3px 14px rgba(0,0,0,.06)}

    .empty{margin:24px clamp(24px,6vw,64px);opacity:.85;text-align:center;color:#2a2f3b}

    /* ======= SERVICES STRIP ======= */
    .services{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin:10px clamp(24px,6vw,64px) 50px}
    @media (max-width:900px){.services{grid-template-columns:1fr}}
    .service-card{background:#fff;border:1px solid #eceff5;border-radius:14px;padding:18px 18px 16px;box-shadow:0 8px 20px rgba(0,0,0,.05)}
    .service-card h3{margin:6px 0 6px;font-size:1.15rem;color:var(--primary)}
    .service-card p{margin:0;color:#2f3a4c}

    /* ======= FOOTER ======= */
    .site-footer{background:#0b0f17;color:#f0f4ff;padding:48px 6vw 36px;border-radius:var(--radius) var(--radius) 0 0;margin-top:80px;text-align:center}
    .footer-cta{display:flex;gap:16px;justify-content:center;margin-bottom:18px}
    .social-links{display:flex;gap:16px;justify-content:center;margin-top:16px}
    .social-links a{font-weight:700;border-bottom:2px solid var(--accent)}

    @media (max-width:750px){
      .site-header{flex-direction:row}
      .hero{min-height:60vh}
      .glass-wrap{width:96vw}
      .footer-cta{flex-direction:column;gap:7px}
      .site-footer{padding:36px 2vw 24px}
    }

    @keyframes fadeInUp{from{opacity:0;transform:translateY(28px)}to{opacity:1;transform:translateY(0)}}
    @media (prefers-reduced-motion:reduce){*{animation:none!important;transition:none!important;scroll-behavior:auto!important}}
    .fade-section{opacity:0;transform:translateY(40px);transition:all .7s cubic-bezier(.25,.8,.25,1)}
    .fade-section.visible{opacity:1;transform:translateY(0)}

    .skip-link{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden;z-index:101;background:#fff;color:#103047;border-radius:0 0 10px 10px;padding:8px 22px}
    .skip-link:focus{left:12px;top:6px;width:auto;height:auto}

    /* (Optional) Watermark deterrent – text only, no images */
    .album-cover::before,.photo::before{
      content:"PITTSBURGH PRESTIGE REMODELING";position:absolute;right:10px;bottom:8px;padding:4px 8px;font:700 12px/1.2 Montserrat, Arial, sans-serif;color:rgba(255,255,255,.96);
      background:rgba(0,0,0,.35);border-radius:6px;letter-spacing:.06em;pointer-events:none
    }
    .album-cover::after,.photo::after{content:"";position:absolute;inset:0;background-image:repeating-linear-gradient(45deg, rgba(255,255,255,.03) 0, rgba(255,255,255,.03) 24px, rgba(0,0,0,.05) 24px, rgba(0,0,0,.05) 48px);mix-blend-mode:multiply;pointer-events:none}
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to main content</a>

  <header class="site-header" id="header">
    <a href="#top" class="brand" aria-label="Pittsburgh Prestige Remodeling home">
      <span class="brand-mark" aria-hidden="true"></span>
      <span>Pittsburgh Prestige Remodeling</span>
    </a>

    <nav id="navbar" class="site-nav" aria-label="Main Navigation">
      <ul>
        <li><a href="#top" class="active" aria-current="page">Home</a></li>
        <li><a href="#services">Services</a></li>
        <li><a href="#projects">Projects</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
    <button id="menuToggle" class="menu-toggle" aria-label="Toggle navigation" aria-controls="navbar" aria-expanded="false">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>
  </header>

  <main id="main">
    <!-- ===== HERO ===== -->
    <section class="hero fade-section" id="top">
      <div class="glass-wrap">
        <div class="liquid-glass">
          <h1>Quality Remodeling, Pittsburgh Proud</h1>
          <p>Black & Gold craftsmanship for kitchens, bathrooms, basements, and full-home renovations across the region.</p>
          <div class="hero-btns">
            <a href="#services" class="btn">View Services</a>
            <a href="#contact" class="btn">Request a Quote</a>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== SERVICES ===== -->
    <section id="services" class="page-hero fade-section">
      <h2>Services</h2>
      <p>From concept to completion, we deliver detail-driven remodeling that lasts.</p>
    </section>
    <div class="services">
      <div class="service-card">
        <h3>Kitchen Remodeling</h3>
        <p>Modern layouts, custom cabinetry, countertops, lighting, and flooring upgrades.</p>
      </div>
      <div class="service-card">
        <h3>Bathroom Remodeling</h3>
        <p>Tile, fixtures, vanities, walk-in showers, and accessibility improvements.</p>
      </div>
      <div class="service-card">
        <h3>Basements & More</h3>
        <p>Finishing, wet bars, home offices, media rooms, and whole-home updates.</p>
      </div>
    </div>

    <!-- ===== PROJECTS (Portfolio-ready structure; no images yet) ===== -->
    <section id="projects" class="page-hero fade-section">
      <h2>Projects</h2>
      <p>When you add photos, they’ll appear here by city and project using the manifest file.</p>
    </section>

    <div class="controls">
      <nav class="breadcrumbs" aria-label="Breadcrumbs" id="breadcrumbs"></nav>
    </div>
    <button class="back-btn" id="backBtn">◀ Back</button>

    <section id="albumsView" class="album-grid" aria-label="Albums"></section>
    <section id="photosView" class="photo-grid" aria-label="Photos" style="display:none;"></section>
    <p id="emptyState" class="empty" hidden>No projects added yet.</p>

    <!-- ===== ABOUT ===== -->
    <section id="about" class="page-hero fade-section">
      <h2>About</h2>
      <p>Pittsburgh Prestige Remodeling is a local contractor focused on precision, clear communication, and dependable timelines. Fully insured. Serving the greater Pittsburgh area.</p>
    </section>

    <!-- ===== CONTACT ===== -->
    <section id="contact" class="page-hero fade-section">
      <h2>Contact</h2>
      <p>Email: <a href="mailto:info@prestigepgh.com">info@prestigepgh.com</a> • Phone: <a href="tel:+14125551234">(412) 555-1234</a></p>
      <div class="footer-cta">
        <a href="#contact" class="btn" aria-label="Request a project estimate">Request a Quote</a>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <p>&copy; <span id="year"></span> Pittsburgh Prestige Remodeling. All rights reserved.</p>
    <div class="social-links">
      <!-- No image icons; add links when ready -->
      <a href="https://www.linkedin.com/" target="_blank" rel="noopener">LinkedIn</a>
      <a href="https://www.instagram.com/" target="_blank" rel="noopener">Instagram</a>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script>

  <script>
    /* ---------------- Mobile nav + header hide + fade-in ---------------- */
    (function navInit(){
      const btn = document.getElementById('menuToggle');
      const nav = document.getElementById('navbar');
      if (btn && nav){
        btn.addEventListener('click', ()=>{
          const open = nav.classList.toggle('open');
          btn.classList.toggle('open');
          btn.setAttribute('aria-expanded', open ? 'true' : 'false');
          if (window.innerWidth <= 860) document.body.classList.toggle('no-scroll', open);
        });
        nav.querySelectorAll('a').forEach(a => a.addEventListener('click', ()=>{
          if (window.innerWidth <= 860){
            nav.classList.remove('open'); btn.classList.remove('open');
            document.body.classList.remove('no-scroll'); btn.setAttribute('aria-expanded','false');
          }
        }));
      }
      let lastY = window.scrollY; const header = document.getElementById('header');
      window.addEventListener('scroll', ()=>{
        const y = window.scrollY;
        header.style.transform = (y > lastY && y > 120) ? 'translateY(-100%)' : 'translateY(0)';
        lastY = y;
      }, { passive:true });

      const faders = document.querySelectorAll('.fade-section');
      const io = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }
        });
      }, { threshold: 0.17 });
      faders.forEach(f => io.observe(f));
    })();

    /* ---------------- Data loading ---------------- */
    const MANIFEST_PATH = '/gallery/imagePaths.json'; // keep this path; start with an empty manifest

    async function loadManifest(){
      try{
        const res = await fetch(MANIFEST_PATH, { cache:'no-cache' });
        if (!res.ok) throw new Error('manifest not found');
        return await res.json();
      }catch(e){
        console.warn('imagePaths.json not found yet – starting with an empty manifest.');
        return { categories:{} };
      }
    }

    /* ---------------- Helpers ---------------- */
    function pickThumbAndSrc(item){
      const widths = (item.widths || []).slice().sort((a,b)=>a-b);
      const largest = widths.length ? widths[widths.length-1] : null;
      const mid = widths.find(w => w >= 1280) || widths[0] || largest;
      const avifMid = item.variants?.avif?.[mid];
      const jpgLargest = item.variants?.jpg?.[largest];
      const avifLargest = item.variants?.avif?.[largest];
      const thumb = avifMid || jpgLargest || avifLargest;
      const src   = jpgLargest || avifLargest || avifMid;
      return { thumb, src };
    }

    function pathPartsFromAnyVariant(item){
      const all = [
        ...Object.values(item.variants?.jpg || {}),
        ...Object.values(item.variants?.avif || {})
      ];
      const p = all[0] || '';
      const parts = p.split('/').filter(Boolean);
      const iGallery = parts.indexOf('gallery');
      if (iGallery === -1 || parts.length < iGallery+3) {
        return { country:'Projects', city:'General', parts };
      }
      const country = parts[iGallery+1] || 'Projects';
      const city = parts[parts.length-2] || 'General';
      return { country, city, parts };
    }

    function buildCountryCity(manifest){
      const byCountry = new Map();
      const cats = manifest.categories || {};
      Object.keys(cats).forEach(cat=>{
        (cats[cat] || []).forEach(item=>{
          const { country, city } = pathPartsFromAnyVariant(item);
          const { thumb, src } = pickThumbAndSrc(item);
          const photo = { title:item.alt || city, caption:'', thumb, src };
          if (!byCountry.has(country)) byCountry.set(country, new Map());
          const byCity = byCountry.get(country);
          if (!byCity.has(city)) byCity.set(city, []);
          byCity.get(city).push(photo);
        });
      });

      const countries = Array.from(byCountry.entries()).map(([country, cityMap])=>{
        const cities = Array.from(cityMap.entries()).map(([city, photos])=>{
          const cover = photos[0]?.thumb; // no default image
          return { id: city, title: city, cover, photos, country };
        }).sort((a,b)=>a.title.localeCompare(b.title));

        const cover = cities[0]?.cover; // no default image
        return { id: country, title: country, cover, children: cities };
      }).sort((a,b)=>a.title.localeCompare(b.title));

      return { title:'All Projects', children: countries };
    }

    /* ---------------- Router / render (albums & photos) ---------------- */
    function getPath(){
      const hash = decodeURI(location.hash || '#/');
      const cleaned = hash.replace(/^#\//,'');
      if (!cleaned || cleaned.startsWith('top')) return [];
      return cleaned.split('/').filter(Boolean);
    }
    function setPath(parts){ location.hash = '#/' + parts.map(encodeURI).join('/'); }

    const breadcrumbsEl = document.getElementById('breadcrumbs');
    const albumsView = document.getElementById('albumsView');
    const photosView = document.getElementById('photosView');
    const emptyState = document.getElementById('emptyState');
    const backBtn = document.getElementById('backBtn');

    let ROOT = { title:'All Projects', children:[] };

    function findNode(parts){
      if (!parts.length) return ROOT;
      const country = ROOT.children.find(c => (c.id||c.title).toLowerCase() === parts[0].toLowerCase());
      if (!country) return null;
      if (parts.length === 1) return country;
      const city = country.children.find(ci => (ci.id||ci.title).toLowerCase() === parts[1].toLowerCase());
      return city || null;
    }

    function buildCrumbs(parts){
      const frag = document.createDocumentFragment();
      const mkLink = (label, toParts)=>{
        const a = document.createElement('a');
        a.href = '#/' + toParts.map(encodeURI).join('/');
        a.textContent = label;
        a.addEventListener('click', e=>{ e.preventDefault(); setPath(toParts); });
        return a;
      };
      frag.appendChild(mkLink('All Projects', []));
      if (parts[0]){
        const sep = document.createElement('span'); sep.textContent='›'; sep.className='crumb-sep'; sep.style.margin='0 6px';
        frag.appendChild(sep); frag.appendChild(mkLink(parts[0], [parts[0]]));
      }
      if (parts[1]){
        const sep2 = document.createElement('span'); sep2.textContent='›'; sep2.className='crumb-sep'; sep2.style.margin='0 6px';
        frag.appendChild(sep2); frag.appendChild(mkLink(parts[1], [parts[0], parts[1]]));
      }
      breadcrumbsEl.innerHTML = ''; breadcrumbsEl.appendChild(frag);
    }

    function renderAlbums(nodes){
      albumsView.innerHTML = '';
      photosView.style.display = 'none';
      albumsView.style.display = 'grid';

      if (!nodes.length){ emptyState.hidden = false; emptyState.textContent = 'No projects added yet.'; return; }
      emptyState.hidden = true;

      nodes.forEach(n=>{
        const card = document.createElement('a');
        card.className='album-card';
        card.href='#';

        const cover = document.createElement('div');
        cover.className='album-cover';
        // no image tag here to avoid any image usage until you add photos

        const cap = document.createElement('div'); cap.className='album-caption';
        const title = document.createElement('div'); title.className='album-title'; title.textContent = n.title;
        const sub = document.createElement('div'); sub.className='album-sub'; sub.textContent = (n.children ? `${n.children.length} CITIES` : `${(n.photos||[]).length} PHOTOS`).toUpperCase();

        cap.appendChild(title); cap.appendChild(sub);

        card.appendChild(cover); card.appendChild(cap);

        card.addEventListener('click', e=>{
          e.preventDefault();
          const parts = getPath();
          parts.push(n.id || n.title);
          setPath(parts);
        });

        albumsView.appendChild(card);
      });
    }

    function renderPhotos(node){
      photosView.innerHTML = '';
      albumsView.style.display='none';
      photosView.style.display='grid';

      const photos = node.photos || [];
      if (!photos.length){ emptyState.hidden=false; emptyState.textContent='No photos added for this project yet.'; return; }
      emptyState.hidden = true;

      photos.forEach((p)=>{
        const a = document.createElement('a');
        a.href = p.src;
        a.setAttribute('data-fancybox', node.title || 'project');
        if (p.title) a.setAttribute('data-caption', p.title);

        const tile = document.createElement('div'); tile.className='photo';
        // intentionally no <img> until you add files

        a.appendChild(tile);
        photosView.appendChild(a);
      });

      bindFancybox();
    }

    function render(){
      const parts = getPath();
      buildCrumbs(parts);
      backBtn.style.display = parts.length ? 'inline-flex' : 'none';

      const node = findNode(parts);
      if (!node){ setPath([]); return; }

      if (node.children) renderAlbums(node.children);
      else renderPhotos(node);
    }

    function bindFancybox(){
      Fancybox.bind('[data-fancybox]', {
        Toolbar: { display: ['close'] },
        Images:  { zoom: false, click: false, wheel: false },
        Thumbs:  { autoStart: false }
      });
    }

    (async function init(){
      // Set year
      const y = document.getElementById('year'); if (y) y.textContent = new Date().getFullYear();

      // Build gallery structure & render (empty until you add manifest/photos)
      const manifest = await loadManifest();
      window.ROOT = buildCountryCity(manifest);
      render();
      window.addEventListener('hashchange', render);
      backBtn.addEventListener('click', ()=>{ const parts = getPath(); parts.pop(); setPath(parts); });
    })();
  </script>
</body>
</html>
